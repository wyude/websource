{% extends "base.html" %}
{% load static %}
{% block mainbody %}
<style>
    /* 为地图和图表容器设置固定高度 */
	#mapContainer {
            height: 80vh;
            width: 100%;
        }
	#chartContainer {
		height: 300px;
		width: 100%;
		margin-top: 20px; /* 与地图保持间距 */
	}
	/* 可选：调整控件位置 (如果默认不好看) */
	.amap-controlbar {
            /* top: 100px !important; */
            /* right: 20px !important; */
        }
	/* 信息面板样式 */
	#infoPanel {
		position: absolute;
		bottom: 20px;
		left: 20px;
		background-color: rgba(255, 255, 255, 0.9);
		padding: 10px 15px;
		border-radius: 5px;
		box-shadow: 0 2px 6px rgba(0,0,0,0.3);
		z-index: 10; /* 确保在地图控件之上 */
		max-width: 300px;
		display: none; /* 初始隐藏 */
	}
  </style>
<!-- Header -->
<header id="header2" style="height: 100px;">

</header>

<!-- Content -->
<section>

<!-- Elements -->
<div class="row">
	<div class="col-12">
		<div id="mapContainer" ></div>
		<div id="infoPanel" class="alert alert-info mt-3" role="alert" style="display: none;">
			点击信息会显示在这里...
		</div>
	</div>
</div>

</section>	
{% for p in points %}
		{{p}}
		{% endfor %}
{% endblock %}

{% block mainscript %}
<script type="text/javascript">
	window._AMapSecurityConfig = {
		securityJsCode: 'ca3562957edaae2b06ee5a265e2c865b', // 替换为你申请的安全密钥
	}
</script>
<script src="https://webapi.amap.com/maps?v=2.0&key=ba726bed3cf909842a925d513bda506f&plugin=AMap.ControlBar,AMap.GeometryUtil"></script>
<script src="{% static 'web_source/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'web_source/js/echarts.min.js' %}"></script>
<script src="{% static 'web_source/js/echarts-extension-amap.min.js' %}"></script>
<script src="{% static 'web_source/js/main_echarts.js' %}"></script>

<script type="text/javascript">
	 var pipelinePoints = [
        {% for p in points %}
		[{{p.location1}}, {{p.location2}}],
		{% endfor %}
    ]
</script>
{% endblock %}


